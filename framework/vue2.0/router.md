### 后端路由

一个页面的内容是浏览器引擎解析请求返回值渲染到页面上的

模板引擎开发页面时的流程大致为：

1. 浏览器发出请求；
2. 服务器监听到端口有请求过来，并解析url路径；
3. 根据服务器的路由配置，返回相应信息（可以是 html 字串，也可以是 json 数据，图片等）；
4. 浏览器根据数据包的 Content-Type 来决定如何解析数据；



### 单页面应用

> 单页 Web 应用（single page web application，SPA），就是只有一张Web页面的应用。单页应用程序 (SPA) 是加载单个HTML 页面并在用户与应用程序交互时动态更新该页面的Web应用程序。浏览器一开始会加载必需的HTML、CSS和JavaScript，**所有的操作都在这张页面上完成**，都由 JavaScript 来控制。因此，对单页应用来说模块化的开发和设计显得相当重要。

优点：

1. 速度：更好的用户体验，让用户在 web app 感受 native app 的速度和流畅；
2. MVVM：经典MVVM开发模式，前后端各负其责；
3. ajax：重前端，业务逻辑全部在本地操作，数据都需要通过AJAX同步、提交；
4. 路由：不会向后端请求新的页面，页面并不会重载；

缺点：

1. SEO 难度高；
2. 首页加载慢；



### 多页面应用

多页面跳转刷新所有资源，每个公共资源(js、css等)需选择性重新加载，常用于 app 或 客户端等



### 单多对比

|                   | SPA                                                          | MPA                                          |
| ----------------- | ------------------------------------------------------------ | -------------------------------------------- |
| 组成              | 一个外壳页面和多个页面片段组成                               | 多个完整页面构成                             |
| 资源共用(css,js)  | 共用，只需在外壳部分加载                                     | 不共用，每个页面都需要加载                   |
| 刷新方式          | 页面局部刷新或更改                                           | 整页刷新                                     |
| 用户体验          | 页面片段间的切换快，用户体验良好                             | 页面切换加载缓慢，流畅度不够，用户体验比较差 |
| 转场动画          | 容易实现                                                     | 无法实现                                     |
| 数据传递          | 容易                                                         | 依赖 url传参、或者cookie 、localStorage等    |
| 搜索引擎优化(SEO) | 需要单独方案、实现较为困难、不利于SEO检索 可利用服务器端渲染(SSR)优化 | 实现方法简易                                 |
| 试用范围          | 高要求的体验度、追求界面流畅的应用                           | 适用于追求高度支持搜索引擎的应用             |
| 开发成本          | 较高，常需借助专业的框架                                     | 较低 ，但页面重复代码多                      |
| 维护成本          | 相对容易                                                     | 相对复杂                                     |

### 前端路由

随着 ajax 的流行，异步数据请求交互运行在不刷新浏览器的情况下进行，SPA 应运而生，为了实现单页面应用，就有了前端路由。

类似于服务端路由，前端路由实现起来其实也很简单，就是**匹配不同的 url 路径**，进行解析，然后**动态的渲染**出区域 html 内容。但是这样存在一个问题，就是 url 每次变化的时候，都会造成页面的刷新。那解决问题的思路便是在改变 url 的情况下，保证页面的不刷新

#### hash模式

2014年以前，前端路由只能通过 `hash` 来实现

`hash` 指的就是 `URL` 中 **#** 后面的内容，它的变化不会导致浏览器向服务器发出请求；请求当中也会自动将 **#** 后面的内容过滤掉

[Window: hashchange event](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/hashchange_event)：`hash` 改变的时候会触发 `hashchange` 事件，我们可以通过这个事件监听利来实现页面内容的更新

#### history模式

2014年之后，HTML5标准引入了 [history.pushState()](https://developer.mozilla.org/en-US/docs/Web/API/History/pushState) 和 [history.replaceState()](https://developer.mozilla.org/en-US/docs/Web/API/History_API#the_replacestate()_method) 方法。这些方法通常与[`window.onpopstate`](https://developer.mozilla.org/zh-CN/docs/Web/API/WindowEventHandlers/onpopstate) 配合使用

通过这两个方法也可以实现改变 URL 但是不发送请求的功能

