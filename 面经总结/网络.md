## HTTP

------

### HTTP常见面试题

------

#### HTTP基本概念

------

超文本传输协议

> HTTP 是一个在计算机中专门在 **两端** 之间传输 文本、图片、音频、视频等 **超文本** 数据的 **约定和规范**

主要从三方面来理解

1. 超文本：字面意思，就是能够传输的数据不只有文本，现在文本的含义已经可以扩展为图片、视频、压缩包等了，**超的关键是超链接**，用于从一个超文本跳转到另一个超文本
2. 传输：端对端进行数据搬运，两个特点：双向，可中转
3. 协议：某个行为的两个以上的参与者用来制约大家行为的约定和规范



#### HTTP常见状态码

------

|      | 具体含义                                           | 常见状态码      |
| ---- | -------------------------------------------------- | --------------- |
| 1xx  | 提示信息，表示目前处于协议处理的中间状态           |                 |
| 2xx  | 成功，已经收到报文并被正确处理                     | 200/204/206     |
| 3xx  | 重定向，资源位置发生变动，需要重新向服务器发起请求 | 301/302/304     |
| 4xx  | 客户端错误，请求报文出错                           | 400/403/404     |
| 5xx  | 服务端错误，服务器在处理请求时内部出错             | 500/501/502/503 |

- `2xx` 成功
- `200 OK`：一切正常，除了 `HEAD` 请求，都会有 `body` 数据
- `204 No Content`：与 200 基本相同，没有 `body` 数据
- `206 Partial Content`：HTTP分块下载或断点续传，表明当前返回的 `body` 数据不是资源的全部
- `3xx` 重定向
- `301 Moved Permanently`：永久重定向
- `302 Found`：临时重定向，301和302都会在响应头里使用字段 `Location`，指明后续要跳转的 URL
- `304 Not Modified`：协商缓存命中，这代表服务器端数据没有更新，浏览器直接使用缓存中的数据
- `4xx` 客户端发送的报文有误
- `400 Bad Request`：客户端请求的报文有错误
- `403 Forbidden`：服务器禁止访问资源，请求没错
- `404 Not Found`：请求的资源在服务器未找到
- `5xx` 服务器处理请求时内部出错
- `500 Internal Server Error`：服务器出错
- `501 Not Implemented`：客户端请求的功能还未实现
- `502 Bad Gateway`：通常是服务器作为⽹关或代理时返回的错误码，表示服务器⾃身⼯作正常，访问后端服务器 发⽣了错误
- `503 Service Unavailable`：服务器繁忙



#### HTTP 常见字段

| 字段名           | 作用                                                         |
| ---------------- | ------------------------------------------------------------ |
| Host             | 指定服务器的域名                                             |
| Content-length   | 本次相应的数据长度                                           |
| Connection       | 常⽤于客户端要求服务器使⽤ TCP 持久连接(keep-alive)，直到客户端或服务器主动关闭连接 |
| Content-Type     | ⽤于服务器回应时，告诉客户端，本次数据是什么格式             |
| Accept           | 客户端请求的时候，⽤以声明⾃⼰可以接受哪些数据格式           |
| Content-Encoding | 表示服务器返回的数据使⽤了什么压缩格式                       |
| Accept-Encoding  | 客户端在请求时，⽤以说明⾃⼰可以接受哪些压缩⽅法             |



#### GET 与 POST 的区别？

GET 方法用于从服务器获取资源

POST 方法用于对服务器的资源进行修改



#### GET 和 POST 方法 是 安全和幂等的吗？

> 安全：在 HTTP 协议中，是指请求方法不会 **破坏** 服务器上的资源

> 幂等：多次 **执行相同的操作**，**结果都是相同的**

- GET
  - 因为 GET 方法是 **只读** 操作，所以肯定 **是安全的**
  - 一般意义上来讲，GET 方法 **是幂等的**，因为 GET方法是用来从服务器获取资源的只读操作，它不应该改变服务器上的资源
- POST
  - POST 方法是 **新增或提交数据的** 操作，会修改服务器上的资源，所以 **不是安全的**
  - 每一次提交都会修改服务器上的资源，所以执行相同的操作，结果也不同，**不是幂等的**



#### HTTP(1.1) 的优点有哪些，怎么体现的？

1. 简单：HTTP 基本的报文格式是 `header + body`，头部信息也是 `key-value`形式的简单文本，易于学习
2. 灵活和易于扩展：请求方法多种多样；URL/URI 除了少数几个参数是固定的，大部分是自定义的；状态码除了常用的还可以自己定义；头部信息也是可以自定义；等等，HTTP协议中很多都允许开发人员 **自定义和扩充**；HTTP 位于 应用层，下层可以随意变化；比如 HTTPS 就是在 HTTP 和 TCP 之间建立了 SSL/TLS 安全传输层；HTTP3 甚至把 TCP 换成了基于 UDP 的 QUIC
3. 应用广泛和跨平台：各种用户端都在使用，天然跨平台

#### HTTP(1.1)  的缺点有哪些？

- 无状态
  - 好处：不需要额外的资源记录状态信息，减轻服务器压力
  - 坏处：服务器没有记忆，在完成有关联性的操作的时候会非常麻烦；
  - 坏处的解决方案之一：Cookie，通过在请求和响应报文中写入 Cookie 来控制客户端的状态
- 明文传输
  - 好处：方便阅读，浏览器的 F12 控制台或 Wireshark 抓包都可以直接查看
  - 坏处：HTTP 的所有信息都是暴露下的，多阶段的传输可能会导致信息泄露
- 不安全（**缺点**）
  - 明文传输，信息可能会泄露
  - 不验证通信方的身份，可能遭遇伪装
  - 无法验证报文的完整性，有可能已经被篡改了

**安全问题如何解决？**

HTTPS，通过引入 SSL/TLS 安全传输层来解决

#### HTTP(1.1) 的性能如何？

HTTP 协议基于 **TCP/IP**，使用 **请求-应答** 的通信模式

- 长连接（TCP 持久连接）

一般的 HTTP 请求（短连接），是**每发起一次请求都要进行一次 TCP 连接（三次握手），而且是串行请求**，这无疑会增加通信开销

长连接就是解决这个问题的，它有效的**减少 TCP 连接的重复建立和断开造成的额外开销**，减轻了服务器端的压力

特点是：**只要任意一端没有明确断开连接，就保持 TCP 连接的状态**

- 管道网络传输

长连接使得管道网络传输成为了可能

短连接是这样的：

1. TCP 建立连接
2. 请求A发送
3. 请求A响应
4. TCP 断开连接
5. TCP 建立连接
6. 请求B发送
7. 请求B响应
8. TCP 断开连接

B请求发送之前必须等 A 请求完成响应，并且断开TCP连接，然后重连

长连接的普通形式：

1. TCP 建立连接
2. 请求A发送
3. 请求A响应
4. 请求B发送
5. 请求B响应
6. TCP 断开连接

这样的 长连接 解决的问题是 TCP 断开重连的性能额外开销，但是，**请求B的发送仍旧需要等待 请求A 的响应完成**

**管道机制**

1. TCP 建立连接
2. 请求A发送
3. 请求B发送
4. 请求A响应
5. 请求B响应
6. TCP 断开连接

请求 A 和 请求 B 可以同时发送，**但是响应依旧是按照请求发送顺序的**

要是前⾯的回应特别慢，后⾯就会有许多请求排队等着。这称为 **队头堵塞**。

- 队头阻塞

**请求 - 应答** 的模式加剧了 HTTP 的性能问题。 因为当顺序发送的请求序列中的⼀个请求因为某种原因被阻塞时，在后⾯排队的所有请求也⼀同被阻塞了，会招致 客户端⼀直请求不到数据，这也就是 **队头阻塞**。好⽐上班的路上塞⻋



## TCP

------



## IP

------



## 网络综合

------

